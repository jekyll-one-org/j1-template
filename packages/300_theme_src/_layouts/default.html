---
layout:                                 compress                                # final layout in inheritance
debug:                                  false                                   # enable|disable additional debug information written to (static) content source
---

{%- capture j1_cache -%}

{% comment %}
 # -----------------------------------------------------------------------------
 # ~/_layouts/default.html
 # Liquid default (base) layout template for all content-pages
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023-2025 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # See: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE
 # -----------------------------------------------------------------------------
 # NOTE:
 #   This is the DEFAULT (base) layout for ALL pages|layouts used by J1 Theme.
 # -----------------------------------------------------------------------------
 # NOTE:
 #   Depending on the site configuration, the HTML code generated by
 #   the base layout 'default.html' will be compressed as a final processing
 #   step.
 # -----------------------------------------------------------------------------
 # NOTE:
 #   Do NOT add any CONTENT here. If needed, go for a "next level" layout
 #   (e.g. 'home.html' or 'page.html') that extents the layout DEFAULT by
 #   additional data for your specific needs based on YAML configuration
 #   data files.
 # -----------------------------------------------------------------------------
 # NOTE:
 #   Output whitespace control: '%-' and '-%'for all liquid markups to strip
 #   blank lines from the rendered HTML.
 # -----------------------------------------------------------------------------
 # Test data:
 #  {{ lanes_collate | debug }}
 # -----------------------------------------------------------------------------
{% endcomment %}

{% comment %} global variables
-------------------------------------------------------------------------------- {% endcomment %}
{% include themes/{{site.template.name}}/procedures/global/set_base_vars_folders.proc %}

{% comment %} liquid procedures
-------------------------------------------------------------------------------- {% endcomment %}
{% capture default_writer %}themes/{{site.template.name}}/procedures/layouts/default_writer.proc{% endcapture %}


{% comment %} process YML config data
================================================================================ {% endcomment %}

{% comment %} initialize global settings
-------------------------------------------------------------------------------- {% endcomment %}
{% assign environment          = site.environment %}
{% assign template_version     = site.version %}
{% assign compress             = site.compress_html.enabled %}
{% assign prettify             = data.j1_config.prettify %}

{% comment %} Set config files
-------------------------------------------------------------------------------- {% endcomment %}
{% assign template_config      = site.data.j1_config %}
{% assign blocks               = site.data.blocks %}
{% assign modules              = site.data.modules %}

{% comment %} Set config data
-------------------------------------------------------------------------------- {% endcomment %}
{% assign scroller_defaults    = modules.defaults.scroller %}

{% comment %} Webhooks disabled
--------------------------------------------------------------------------------
{% assign webhook_defaults     = modules.defaults.webhooks.defaults %}
{% assign webhook_settings     = modules.webhooks.settings %}
-------------------------------------------------------------------------------- {% endcomment %}

{% comment %} Set config options
-------------------------------------------------------------------------------- {% endcomment %}
{% assign tooltips_options     = template_config.bootstrap.tooltips %}
{% assign popovers_options     = template_config.bootstrap.popovers %}

{% comment %} Webhooks disabled
--------------------------------------------------------------------------------
{% assign webhook_options      = webhook_defaults | merge: webhook_settings %}
-------------------------------------------------------------------------------- {% endcomment %}

{% assign lanes_collate        = data.layouts.default.lanes %}
{% assign logon_client         = data.modules.j1_sign_in_up %}
{% assign body_scrollbar       = data.j1_config.body.scrollbar %}

{% comment %} Overload properties from page options
-------------------------------------------------------------------------------- {% endcomment %}
{% if page.scrollbar %}
  {% assign body_scrollbar = page.scrollbar %}
{% endif %}

{% comment %} main
-------------------------------------------------------------------------------- {% endcomment %}
<!DOCTYPE {{site.doctype}}>
<html lang="{{site.language}}">

{% comment %} additional debug data
-------------------------------------------------------------------------------- {% endcomment %}
{% if page.debug %}
<!-- [DEBUG  ] [j1.layout.default.html                ] [ layout data to be loaded: {{lanes_collate}} ] -->
{% endif %}

<!-- [INFO   ] [j1.layout.default.html                ] [ page generated: {{site.time}} ] -->
<!-- [INFO   ] [j1.layout.default.html                ] [ environment detected as: {{environment}} ] -->
<!-- [INFO   ] [j1.layout.default.html                ] [ version detected as: {{template_version}} ] -->

  {% comment %} collect the head section (region head)
  ------------------------------------------------------------------------------ {% endcomment %}
  <head data-proofer-ignore>
    <!-- [INFO   ] [j1.layout.default.html                ] [ call default_writer for region: 'head' ] -->
    {% include {{default_writer}} region='head' items=lanes_collate %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ end default_writer for region: 'head' ] -->
  </head>

  <body class="nomathjax">

    <!-- [INFO   ] [j1.layout.default.html                ] [ check if a noscript page is enabled ] -->
    {% if site.noscript %}
      {% assign page_noscript = site.noscript %}
    {% else %}
      {% assign page_noscript = false %}
    {% endif %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ noscript page is enabled: {{page_noscript}} ] -->

    {% assign language            = site.language %}
    {% assign webmaster_email     = site.webmaster.email %}
    {% assign copyright_info      = site.copyright %}
    {% assign http_error          = '444' %}
    {% assign back_url            = "about:blank" %}

    {% capture brand_image %}{{images_dir}}/{{brand_image_source}}{% endcapture %}

    {% if language != 'en' or language != 'de' %}
      {% assign language          = 'en' %}
    {% endif %}

    {% if language == 'en' %}
      {% assign title             = "Javascript disabled" %}
      {% assign back_url_text     = "Cannot continue" %}
      {% assign reason            = "Your current browser settings reject the use of Javascript." %}
      {% assign contact_issue     = "Technical Contact" %}
    {% endif %}

    {% if language == 'de' %}
      {% assign title             = "Javascript abgeschaltet" %}
      {% assign back_url_text     = "Fortsetzung nicht möglich" %}
      {% assign reason            = "Die aktuellen Einstellungen Ihres Browsers erlauben KEINE Ausführung von Javascript." %}
      {% assign contact_issue     = "Technischer Kontakt" %}
    {% endif %}

    {% comment %} current noscript cause errors in Nu HTML Checker
    See: https://validator.w3.org/nu
    ---------------------------------------------------------------------------- {% endcomment %}
    {% if page_noscript %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ place a noscript info|error page ] -->
    <noscript>
      <html lang="{{language}}">
        <head>
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <link rel="icon" type="{{site.favicon.type}}" href="{{site.data.j1_config.image_path}}/{{site.favicon.image}}">

          <style>
            .noscript_css {margin-top: 8.5rem !important;}
            /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */
            html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{cursor: pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{cursor: pointer ;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}body,html{width:100%;height:100%;background-color:#21232a}body{color:#fff;text-align:center;text-shadow:0 2px 4px rgba(0,0,0,.5);padding:0;min-height:100%;-webkit-box-shadow:inset 0 0 100px rgba(0,0,0,.8);box-shadow:inset 0 0 100px rgba(0,0,0,.8);display:table;font-family:"Open Sans",Arial,sans-serif}h1{font-family:inherit;font-weight:500;line-height:1.1;color:inherit;font-size:36px}h1 small{font-size:68%;font-weight:400;line-height:1;color:#777}a{text-decoration:none;color:#fff;font-size:inherit;border-bottom:dotted 1px #707070}.lead{color:silver;font-size:21px;line-height:1.4}.cover{display:table-cell;vertical-align:middle;padding:0 20px}footer{position:fixed;width:100%;height:40px;left:0;bottom:0;color:#a0a0a0;font-size:14px}
          </style>
        </head>

        <body>
          <div class="header noscript_css">
            <h1>{{title}} <small>{{http_error}}</small></h1>
            <p class="lead">{{reason}}</p>
            <div><a href="{{back_url}}">{{back_url_text}}</a></div>
          </div>
          <footer>
            <p>{{copyright_info}} · {{contact_issue}}: <a href="mailto:{{webmaster_email}}?subject={{title}}">{{webmaster_email}}</a></p>
          </footer>
        </body>

      </html>
    </noscript>
    {% endif %}

    {% comment %} wrapper to suppress DOM flicker|Overflow
    ----------------------------------------------------------------------------
    NOTE:
      2021-11-13:
      Since moved to bs@5, a overflow is on the HOME page
      but !!! NOT seen on content pages !!!
    ----------------------------------------------------------------------------- {% endcomment %}

    <!-- [INFO   ] [j1.layout.default.html                ] [ start page processing for region: 'body' ] -->
    <!-- [INFO   ] [j1.layout.default.html                ] [ place wrapper to prevent "DOM flicker" ] -->
    <!-- [INFO   ] [j1.layout.default.html                ] [ make page hidden (suppress flicker) ] -->
    <!-- [INFO   ] [j1.layout.default.html                ] [ suppress page overflows (overflow: hidden) ] -->
    <!-- [INFO   ] [j1.layout.default.html                ] [ hide page (display: none) on id "no_flicker" ] -->
    <div id="no_flicker" style="overflow: hidden; display: none">

      {% comment %} collect the BODY-NAVIGATION region
      -------------------------------------------------------------------------- {% endcomment %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ call default_writer for region: 'body-navigation' ] -->
      {% include  {{default_writer}} region='body-navigation' items=lanes_collate %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ end processing default_writer for region: 'body-navigation' ] -->

      {% comment %} inherit CONTENT from other LAYOUTS
      -------------------------------------------------------------------------- {% endcomment %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ place content inherited by layout: {{ page.layout}} ] -->
      {{ content }}
      <!-- [INFO   ] [j1.layout.default.html                ] [ end content inherited by layout: {{ page.layout}} ] -->

      {% comment %} collect the BODY-FOOTER region
      -------------------------------------------------------------------------- {% endcomment %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ call default_writer for region: 'body-footer' ] -->
      {% include  {{default_writer}} region='body-footer' items=lanes_collate %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ end content_writer default_writer for region: 'body-footer' ] -->

    </div>
    <!-- [INFO   ] [j1.layout.default.html                ] [ end suppress flicker ] -->

    <!-- [INFO   ] [j1.layout.default.html                ] [ place hidden color selector/themes: bg-primary ] -->
    <div id="bg-primary" class="bg-primary" style="display: none"></div>

    <!-- [INFO   ] [j1.layout.default.html                ] [ end default writer] -->

    <!-- [INFO   ] [j1.layout.default.html                ] [ place container for the floating action button (FAB) ] -->
    <div id="fab-container"></div>

    {% comment %} Place container for the r-text resizer (currently NOT used)
    ----------------------------------------------------------------------------
    <!-- [INFO   ] [j1.layout.default.html                ] [ place container for the r-text resizer modal ] -->
    <div id="rtext_resizer_container"></div>
    ---------------------------------------------------------------------------- {% endcomment %}


    {% comment %} Place container for WebHook modals
    ---------------------------------------------------------------------------- {% endcomment %}
    {% if webhook_options.enabled %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ place container for WebHook Modals ] -->
    <div id="{{webhook_options.xhr_container_id}}"></div>
    {% endif %}

    {% comment %} Initialize global JS scripts
    ---------------------------------------------------------------------------- {% endcomment %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ initialize global JS scripts ] -->
    <script>
      //  BS tooltips and popovers
      $(function() {
        {% if tooltips_options.enabled %}
          // initialize BS tooltips
          var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
          var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
          });
        {% endif %}

        {% if popovers_options.enabled %}
          // initialize BS popovers
          var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
          var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
            return new bootstrap.Popover(popoverTriggerEl)
          });
        {% endif %}
      });
    </script>

  </body>

    <!-- [INFO   ] [j1.layout.default.html                ] [ end page processing ] -->
</html>

{%- endcapture -%}

{% comment %} POST processing of the generated page using (captured) cache
-------------------------------------------------------------------------------- {% endcomment %}
{%- case environment -%}

  {% comment %} DEVELOPMENT mode
  ------------------------------------------------------------------------------ {% endcomment %}
  {%- when 'development' or 'dev' or 'test' -%}
    {%- if prettify -%}
      {{ j1_cache | strip_empty_lines | remove: '<p>excerpt__end</p>' | pretty_print }}
    {%- else -%}
      {{ j1_cache | strip_empty_lines | remove: '<p>excerpt__end</p>' }}
    {%- endif- %}
    {% comment %} END IF prettify {% endcomment %}

  {% comment %} PRODUCTION mode
  ------------------------------------------------------------------------------ {% endcomment %}
  {%- when 'production' or 'prod' -%}
    {%- unless compress -%}
      {%- if prettify -%}
        {{ j1_cache | remove: '<p>excerpt__end</p>' | strip_html_comments | strip_js_comments | strip_empty_lines | pretty_print }}
      {%- else -%}
        {{ j1_cache | remove: '<p>excerpt__end</p>' | strip_html_comments | strip_js_comments | strip_empty_lines }}
      {%- endif -%} {%- comment -%} END prettify {%- endcomment -%}
    {%- endunless -%}
    {% comment %} UNLESS compress {% endcomment %}

  	{%- if compress -%}
      {{ j1_cache | remove: '<p>excerpt__end</p>' | strip_html_comments | strip_js_comments | strip_empty_lines }}
  	{%- endif -%}
    {% comment %} IF compress {% endcomment %}

  {% comment %} UNKNOWN mode
  ------------------------------------------------------------------------------ {% endcomment %}
  {%- else -%}
    {{ j1_cache | remove: '<p>excerpt__end</p>'| strip_empty_lines }}

{%- endcase -%}
